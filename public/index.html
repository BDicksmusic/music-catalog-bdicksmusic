<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Music Catalog</title>
    <link rel="stylesheet" href="variables.css"> 
    <link rel="stylesheet" href="styles.css">
    <style>
        html {
      scroll-behavior: smooth;
    }
    @keyframes pulse-glow {
        0%, 100% { 
            opacity: 0.85; 
            transform: scale(1);
        }
        50% { 
            opacity: .98; 
            transform: scale(1.03);
        }
    }
    @keyframes fadeInUp {
        0% {
            opacity: 0;
            transform: translateY(20px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }
    @keyframes subtleShimmer {
        0% {
            background-position: -200% 0, 0 0;
        }
        100% {
            background-position: 200% 0, 0 0;
        }
    }
    /* Explore Button Styles */
    .explore-btn {
        display: inline-block;
        color: var(--gray-100);
        font-size: 25px;
        background: var(--primary-400);
        font-weight: 900;
        text-decoration: none;
        cursor: pointer;
        border-radius: 50px;
        padding: 7px 10px;
        border: 1px solid var(--primary-400);
        box-shadow: 0 4px 10px rgba(0,0,0,0.13);
        position: relative;
        overflow: hidden;
        
        /* Initial hidden state for animation */
        opacity: 0;
        transform: translateY(20px);
        
        /* Animation sequence */
        animation: 
            fadeInUp 0.8s ease-out 0.6s forwards,
            pulse-glow 6.5s infinite 2s;
    }
    
    .explore-btn:hover { 
        color: var(--gray-100);
        background: 
            linear-gradient(
                90deg,
                transparent 0%,
                rgba(255, 255, 255, 0.3) 20%,
                rgba(255, 255, 255, 0.6) 50%,
                rgba(255, 255, 255, 0.3) 80%,
                transparent 100%
            ),
            var(--primary-500);
        background-size: 200% 100%, 100% 100%;
        border-color: var(--primary-500);
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
        
        /* Only pause pulse animation, keep fadeInUp intact, add shimmer */
        animation: 
            fadeInUp 0.8s ease-out 0.6s forwards,
            pulse-glow 6.5s infinite 2s paused,
            subtleShimmer 4s linear infinite;
            
        /* Override transform for hover effect */
        transform: scale(1.05) translateY(-1px) !important;
        transition: border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
    }
    @media (max-width: 768px) {
        .explore-btn {
            font-size: 18px;
            padding: 8px 16px;
        }
    }

    .hero-explore-section {
        margin-top: 1.5rem;
    }

    .explore-btn.secondary {
        background: rgba(255, 255, 255, 0.2);
        color: var(--gray-100);
        border: 2px solid rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(10px);
        font-size: 1rem;
        padding: 0.75rem 1.5rem;
    }

    .explore-btn.secondary:hover {
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.8);
        transform: scale(1.05) translateY(-2px) !important;
    }
    /* Hero Video Styles */
    .hero-video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 1;
        opacity: 0;
        transition: opacity 0.8s ease;
    }

    .hero-video.loaded {
        opacity: 1;
    }

    .hero-fallback-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 2;
        opacity: 1;
        transition: all 0.8s ease;
        filter: brightness(0.8);
    }

    .hero-fallback-image.hidden {
        opacity: 0;
        z-index: 1 !important;
        transform: scale(0.98);
        visibility: hidden;
        pointer-events: none;
    }

    .hero-fallback-image.active {
        opacity: 1;
        z-index: 2 !important;
        transform: scale(1);
        visibility: visible;
        pointer-events: auto;
    }

    .works-grid.dragging {
        cursor: grabbing;
        user-select: none;
    }
    .works-grid {
        display: flex;
        flex-direction: row;
        overflow-x: auto !important;
        overflow-y: hidden;
        gap: var(--space-5);
        padding: 0;
        width: 100vw;
        max-width: 100vw;
        min-width: 100vw;
        scroll-behavior: smooth;
        cursor: grab;
    }

    /* Dynamic Hero Styles */
    .hero-content-dynamic {
        max-width: 800px;
        margin: 0 auto;
        padding: 0 2rem;
    }

    .hero-main-title {
        font-size: 2.5rem;
        font-weight: 900;
        color: var(--gray-100);
        margin-bottom: 1.5rem;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        letter-spacing: 2px;
    }

    .hero-rotating-content {
        position: relative;
        min-height: 200px;
        margin-bottom: 2rem;
    }

    .hero-role {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.6s ease;
        text-align: center;
    }

    .hero-role.active {
        opacity: 1;
        transform: translateY(0);
    }

    .hero-role-title {
        font-size: 2rem;
        font-weight: 700;
        color: var(--gray-100);
        margin-bottom: 1rem;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .hero-role-description {
        font-size: 1.1rem;
        color: var(--gray-200);
        margin-bottom: 2rem;
        line-height: 1.6;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    .hero-nav-dots {
        display: flex;
        justify-content: center;
        gap: 0.75rem;
        margin-top: 1rem;
    }

    .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        border: 2px solid var(--gray-300);
        background: transparent;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .dot.active {
        background: var(--primary-400);
        border-color: var(--primary-400);
        box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
    }

    .dot:hover {
        border-color: var(--primary-300);
        transform: scale(1.2);
    }

    @media (max-width: 768px) {
        .hero-main-title {
            font-size: 2rem;
        }
        
        .hero-role-title {
            font-size: 1.5rem;
        }
        
        .hero-role-description {
            font-size: 1rem;
        }
        
                 .hero-content-dynamic {
             padding: 0 1rem;
         }
     }

     /* Section Styles */
     .section-showcase {
         padding: 4rem 0;
         background: var(--gray-50);
     }

     .section-showcase.alt-bg {
         background: var(--gray-100);
     }

     .section-header {
         text-align: center;
         margin-bottom: 3rem;
     }

     .section-title {
         font-size: 2.5rem;
         font-weight: 700;
         margin-bottom: 1rem;
         color: var(--gray-900);
     }

     .section-subtitle {
         font-size: 1.1rem;
         color: var(--gray-600);
         max-width: 600px;
         margin: 0 auto;
         line-height: 1.6;
     }

     /* Enhanced Catalog Highlights Section */
     .catalog-highlights-grid {
         display: grid;
         grid-template-columns: 2fr 1fr;
         gap: 3rem;
         align-items: start;
         max-width: 1200px;
         margin: 0 auto;
     }

     .featured-composition {
         background: white;
         border-radius: 16px;
         overflow: hidden;
         box-shadow: 0 10px 30px rgba(0,0,0,0.1);
         transition: transform 0.3s ease, box-shadow 0.3s ease;
         display: flex;
         min-height: 400px;
     }

     .featured-composition:hover {
         transform: translateY(-5px);
         box-shadow: 0 20px 40px rgba(0,0,0,0.15);
     }

     .featured-composition-image {
         flex: 1;
         position: relative;
         overflow: hidden;
         min-height: 400px;
     }

     .composition-highlight-img {
         width: 100%;
         height: 100%;
         object-fit: cover;
         transition: transform 0.3s ease;
     }

     .featured-composition:hover .composition-highlight-img {
         transform: scale(1.05);
     }

     /* Audio Preview Overlay */
     .audio-preview-overlay {
         position: absolute;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(0,0,0,0.1));
         display: flex;
         align-items: center;
         justify-content: center;
         opacity: 0;
         transition: opacity 0.3s ease;
     }

     .featured-composition:hover .audio-preview-overlay {
         opacity: 1;
     }

     .preview-play-btn {
         background: rgba(255, 255, 255, 0.9);
         border: none;
         border-radius: 50px;
         padding: 1rem 1.5rem;
         display: flex;
         align-items: center;
         gap: 0.5rem;
         font-weight: 600;
         color: var(--gray-900);
         cursor: pointer;
         transition: all 0.3s ease;
         backdrop-filter: blur(10px);
         box-shadow: 0 4px 12px rgba(0,0,0,0.15);
     }

     .preview-play-btn:hover {
         background: white;
         transform: scale(1.05);
         box-shadow: 0 6px 20px rgba(0,0,0,0.2);
     }

     .play-icon {
         font-size: 1.2rem;
         color: var(--primary-500);
     }

     .featured-composition-content {
         flex: 1;
         padding: 2.5rem;
         display: flex;
         flex-direction: column;
         justify-content: space-between;
     }

     .composition-header {
         margin-bottom: 1.5rem;
     }

     .featured-title {
         font-size: 1.8rem;
         font-weight: 700;
         margin-bottom: 1rem;
         color: var(--gray-900);
         line-height: 1.3;
     }

     .composition-badges {
         display: flex;
         gap: 0.5rem;
         flex-wrap: wrap;
     }

     .difficulty-badge {
         background: var(--primary-100);
         color: var(--primary-700);
         padding: 0.25rem 0.75rem;
         border-radius: 20px;
         font-size: 0.85rem;
         font-weight: 600;
     }

     .year-badge {
         background: var(--gray-100);
         color: var(--gray-700);
         padding: 0.25rem 0.75rem;
         border-radius: 20px;
         font-size: 0.85rem;
         font-weight: 600;
     }

     .featured-instrumentation {
         font-size: 1.1rem;
         color: var(--primary-600);
         font-weight: 600;
         margin-bottom: 1rem;
     }

     .featured-description {
         color: var(--gray-600);
         line-height: 1.6;
         margin-bottom: 1.5rem;
         flex-grow: 1;
     }

     /* Audio Player Styling */
     .composition-audio-preview {
         margin-bottom: 1.5rem;
         padding: 1rem;
         background: var(--gray-50);
         border-radius: 12px;
         border: 1px solid var(--gray-200);
     }

     .composition-audio-preview audio {
         width: 100%;
         height: 40px;
         border-radius: 8px;
     }

     .composition-actions {
         display: flex;
         gap: 1rem;
         flex-wrap: wrap;
     }

     .composition-actions .btn-primary {
         flex: 1;
         min-width: 140px;
         text-align: center;
     }

     .composition-actions .btn-secondary {
         flex: 1;
         min-width: 140px;
         text-align: center;
         background: transparent;
         color: var(--gray-700);
         border: 2px solid var(--gray-300);
     }

     .composition-actions .btn-secondary:hover {
         background: var(--gray-100);
         border-color: var(--gray-400);
     }

     /* Enhanced Stats Section */
     .catalog-stats {
         display: flex;
         flex-direction: column;
         gap: 1.5rem;
         background: white;
         padding: 2rem;
         border-radius: 16px;
         box-shadow: 0 10px 30px rgba(0,0,0,0.1);
         height: fit-content;
     }

     .stats-header {
         text-align: center;
         margin-bottom: 1rem;
         padding-bottom: 1rem;
         border-bottom: 2px solid var(--gray-100);
     }

     .stats-header h3 {
         font-size: 1.3rem;
         font-weight: 700;
         color: var(--gray-900);
         margin: 0;
     }

     .stat-item {
         text-align: center;
         padding: 1.5rem;
         background: var(--gray-50);
         border-radius: 12px;
         transition: all 0.3s ease;
         border: 2px solid transparent;
     }

     .stat-item:hover {
         background: white;
         border-color: var(--primary-200);
         transform: translateY(-2px);
         box-shadow: 0 5px 15px rgba(0,0,0,0.1);
     }

     .featured-stat {
         background: linear-gradient(135deg, var(--primary-50) 0%, var(--primary-100) 100%);
         border: 2px solid var(--primary-200);
     }

     .stat-number {
         display: block;
         font-size: 2.5rem;
         font-weight: 900;
         color: var(--primary-500);
         margin-bottom: 0.5rem;
         line-height: 1;
     }

     .stat-label {
         font-size: 1rem;
         color: var(--gray-800);
         font-weight: 600;
         display: block;
         margin-bottom: 0.25rem;
     }

     .stat-detail {
         font-size: 0.85rem;
         color: var(--gray-600);
         font-style: italic;
     }

     .cta-stat {
         background: var(--primary-500);
         color: white;
         padding: 0;
         border-radius: 12px;
         overflow: hidden;
     }

     .cta-stat:hover {
         background: var(--primary-600);
         transform: translateY(-3px);
     }

     .catalog-browse-btn {
         width: 100%;
         padding: 1.5rem 1rem !important;
         border-radius: 12px !important;
         background: transparent !important;
         color: white !important;
         border: none !important;
         font-weight: 700;
         font-size: 1rem;
         display: flex !important;
         align-items: center;
         justify-content: center;
         gap: 0.5rem;
         text-decoration: none;
         transition: all 0.3s ease;
     }

     .catalog-browse-btn:hover {
         background: rgba(255,255,255,0.1) !important;
         transform: none;
     }

     .btn-icon {
         font-size: 1.2rem;
     }

     /* Education Section */
     .education-grid {
         display: grid;
         grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
         gap: 2rem;
         max-width: 1200px;
         margin: 0 auto;
     }

     .education-card {
         background: white;
         padding: 2rem;
         border-radius: 12px;
         text-align: center;
         box-shadow: 0 5px 15px rgba(0,0,0,0.08);
         transition: all 0.3s ease;
     }

     .education-card:hover {
         transform: translateY(-5px);
         box-shadow: 0 15px 30px rgba(0,0,0,0.15);
     }

     .card-icon {
         font-size: 3rem;
         margin-bottom: 1rem;
     }

     .education-card h3 {
         font-size: 1.3rem;
         font-weight: 600;
         color: var(--gray-900);
         margin-bottom: 1rem;
     }

     .education-card p {
         color: var(--gray-600);
         line-height: 1.6;
         margin-bottom: 1.5rem;
     }

     .card-link {
         color: var(--primary-500);
         font-weight: 600;
         text-decoration: none;
         transition: color 0.3s ease;
     }

     .card-link:hover {
         color: var(--primary-600);
     }

     /* Testimonials Section */
     .testimonials-section {
         padding: 4rem 0;
         background: var(--gray-900);
         color: white;
     }

     .testimonials-section .section-title {
         color: white;
     }

     .testimonials-grid {
         display: grid;
         grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
         gap: 2rem;
         max-width: 1200px;
         margin: 0 auto;
     }

     .testimonial-card {
         background: rgba(255,255,255,0.1);
         padding: 2rem;
         border-radius: 12px;
         backdrop-filter: blur(10px);
         border: 1px solid rgba(255,255,255,0.1);
     }

     .testimonial-content p {
         font-style: italic;
         font-size: 1.1rem;
         line-height: 1.6;
         margin-bottom: 1.5rem;
         color: var(--gray-200);
     }

     .testimonial-author strong {
         color: white;
         display: block;
         margin-bottom: 0.25rem;
     }

     .testimonial-author span {
         color: var(--gray-400);
         font-size: 0.9rem;
     }

     /* Mobile Responsiveness */
     @media (max-width: 768px) {
         .catalog-highlights-grid {
             grid-template-columns: 1fr;
             gap: 2rem;
         }

         .featured-composition {
             flex-direction: column;
             min-height: auto;
         }

         .featured-composition-image {
             height: 250px;
             min-height: 250px;
         }

         .featured-composition-content {
             padding: 2rem 1.5rem;
         }

         .featured-title {
             font-size: 1.5rem;
         }

         .composition-actions {
             flex-direction: column;
         }

         .composition-actions .btn-primary,
         .composition-actions .btn-secondary {
             flex: none;
             width: 100%;
         }

         .catalog-stats {
             padding: 1.5rem;
             gap: 1rem;
         }

         .stats-header {
             margin-bottom: 0.5rem;
             padding-bottom: 0.5rem;
         }

         .stat-item {
             padding: 1rem;
         }

         .stat-number {
             font-size: 2rem;
         }

         .catalog-browse-btn {
             padding: 1.25rem 1rem !important;
         }

         .section-title {
             font-size: 2rem;
         }

         .section-subtitle {
             font-size: 1rem;
         }

         .education-card, .testimonial-card {
             padding: 1.5rem;
         }
     }

      /* Call to Action Section */
      .cta-section {
          padding: 4rem 0;
          background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%);
          color: white;
          text-align: center;
      }

      .cta-content h2 {
          font-size: 2.5rem;
          font-weight: 700;
          margin-bottom: 1rem;
          color: white;
      }

      .cta-content p {
          font-size: 1.2rem;
          margin-bottom: 2rem;
          color: rgba(255,255,255,0.9);
          max-width: 600px;
          margin-left: auto;
          margin-right: auto;
      }

      .cta-buttons {
          display: flex;
          gap: 1rem;
          justify-content: center;
          flex-wrap: wrap;
      }

      .cta-buttons .btn-primary {
          background: white;
          color: var(--primary-600);
          border: 2px solid white;
      }

      .cta-buttons .btn-primary:hover {
          background: transparent;
          color: white;
          border-color: white;
      }

      .cta-buttons .btn-secondary {
          background: transparent;
          color: white;
          border: 2px solid rgba(255,255,255,0.5);
      }

      .cta-buttons .btn-secondary:hover {
          background: rgba(255,255,255,0.1);
          border-color: white;
      }

      @media (max-width: 768px) {
          .cta-content h2 {
              font-size: 2rem;
          }
          
          .cta-content p {
              font-size: 1rem;
          }
          
          .cta-buttons {
              flex-direction: column;
              align-items: center;
          }
          
          .cta-buttons a {
              width: 200px;
          }
      }
      
      /* Hero Container Styles */
      .hero-container {
          position: relative;
          width: 100%;
          height: 100vh;
          min-height: 700px;
          max-height: 900px;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-left: calc(50% - 50vw);
          margin-right: calc(50% - 50vw);
          margin-top: 95px; /* Account for primary nav (70px) + secondary nav (40px) */
      }
      
      .hero-carousel {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: 1;
      }
      
      /* Enhanced Hero Video Styles - Make it "Pop Out" */
      .hero-video {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          z-index: 2;
          opacity: 0;
          transition: all 1.2s ease;
          filter: brightness(0.8) contrast(1.1);
      }

      .hero-video.loaded {
          opacity: 1;
          filter: brightness(0.9) contrast(1.2) saturate(1.1);
          transform: scale(1.02);
      }

      .hero-fallback-image {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          z-index: 2;
          opacity: 1;
          transition: opacity 1s ease, transform 0.5s ease;
          filter: brightness(0.8);
      }

      .hero-fallback-image.hidden {
          opacity: 0;
          z-index: 1 !important;
          transform: scale(0.98);
          visibility: hidden;
          pointer-events: none;
      }

      .hero-fallback-image.active {
          opacity: 1;
          z-index: 2 !important;
          transform: scale(1);
          visibility: visible;
          pointer-events: auto;
      }
      
      /* Hero Content Overlay */
      .hero-content-overlay {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: linear-gradient(
              45deg,
              rgba(0, 0, 0, 0.4) 0%,
              rgba(0, 0, 0, 0.2) 50%,
              rgba(0, 0, 0, 0.3) 100%
          );
          z-index: 3;
          pointer-events: none;
      }
      
      .hero-content-wrapper {
          position: absolute;
          bottom: 25%;
          left: 0;
          right: 0;
          z-index: 10;
          text-align: center;
          pointer-events: auto;
      }
      
      @media (max-width: 768px) {
          .hero-container {
              height: 80vh;
              min-height: 500px;
              max-height: 700px;
              margin-top: 100px; /* Reduced for mobile - nav elements are smaller */
          }
          
          .hero-content-wrapper {
              bottom: 20%;
          }
          
          .secondary-nav {
              top: 60px; /* Adjust for smaller mobile nav */
          }
      }
      
      /* Main Content Container */
      .main-content-container {
          width: 100%;
          max-width: 100vw;
          overflow-x: hidden;
      }
      
      /* Ensure all sections respect container width */
      .container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 1rem;
          width: 100%;
      }
      
      .section-showcase {
          width: 100%;
          max-width: 100vw;
          overflow-x: hidden;
          padding: 4rem 0;
      }
      
      /* Fix secondary navigation positioning */
      .secondary-nav {
          position: fixed;
          top: 55px; /* Adjusted to account for primary nav height */
          left: 0;
          z-index: 950; /* Higher than the 900 from styles.css */
          width: 100%;
          max-width: 100%;
          margin: 0;
          padding: 0;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      /* Ensure hero content doesn't overflow */
      .hero-content-dynamic {
          width: 100%;
          max-width: 800px;
          margin: 0 auto;
          padding: 0 1rem;
      }
      
      .hero-main-title {
          font-size: clamp(2.5rem, 8vw, 4rem);
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
      }
      
      .hero-role-title {
          font-size: clamp(1.5rem, 5vw, 2.5rem);
      }
      
      .hero-role-description {
          font-size: clamp(1rem, 3vw, 1.2rem);
          max-width: 600px;
          margin: 0 auto 1.5rem;
      }
      
      @media (max-width: 1200px) {
          .container {
              max-width: 95%;
          }
      }
      
      @media (max-width: 768px) {
          .hero-main-title {
              font-size: 2.5rem;
              white-space: normal;
          }
          
          .hero-role-title {
              font-size: 1.8rem;
          }
          
          .hero-role-description {
              font-size: 1rem;
          }
          
          .hero-content-dynamic {
              padding: 0 1.5rem;
          }
      }
    </style>
</head>

<body>
    <!-- Navigation -->
<nav>
    <div class="nav-container">
        <a href="index.html" class="logo">BRANDON DICKS</a>
        <div class="nav-right">
            <ul class="nav-menu">
                <li class="nav-item"><a href="media.html" class="nav-link">Media</a></li>
                <li class="nav-item dropdown">
                    <a href="#" class="nav-link">News</a>
                    <ul class="dropdown-menu">
                        <li><a href="news.html">Latest News</a></li>
                        <li><a href="updates.html">Updates</a></li>
                        <li><a href="events.html">Events</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a href="#" class="nav-link">Teaching Material</a>
                    <ul class="dropdown-menu">
                        <li><a href="exercises.html">Exercises</a></li>
                        <li><a href="tutorials.html">Tutorials</a></li>
                        <li><a href="resources.html">Resources</a></li>
                    </ul>
                </li>
                <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
                <li class="nav-item dropdown">
                    <a href="#" class="nav-link">Contact</a>
                    <ul class="dropdown-menu">
                        <li><a href="contact.html">Get in Touch</a></li>
                        <li><a href="booking.html">Book a Lesson</a></li>
                        <li><a href="inquiries.html">General Inquiries</a></li>
                    </ul>
                </li>
            </ul>
            <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
                <svg class="sun-icon" width="18" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="moon-icon" width="18" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
              <button class="music-catalog-btn"><a href="music-catalog.html">Music Catalog</a></button>
    
              <div class="hamburger">
                <span></span>
                <span></span>   
                <span></span>
              </div>
        </div>
    </div>
</nav>
    
    <!-- Secondary Navigation -->
    <nav class="secondary-nav">
        <a href="/composer" class="secondary-button">Composer</a>
        <a href="/trumpeter" class="secondary-button">Trumpeter</a>
        <a href="/educator" class="secondary-button">Educator</a>
    </nav>

    <!-- Hero Section -->
    <div class="hero-container">
        <!-- Image Carousel Fallback -->
        <div class="hero-carousel" id="hero-carousel">
            <img 
                src="/Index Photos/CJL07828.JPG" 
                alt="Hero Background - Live Musical Performance" 
                class="hero-fallback-image active"
            >
            <img 
                src="/Index Photos/Playing Photo.jpg" 
                alt="Hero Background - Performance Photo" 
                class="hero-fallback-image"
            >
            <img 
                src="/Index Photos/Letters Playing Photo.png" 
                alt="Hero Background - Letters Performance" 
                class="hero-fallback-image"
            >
            <img 
                src="/Index Photos/[Master Video] Resolutions MVT 1.00_00_21_06.Still001.jpg" 
                alt="Hero Background - Master Video Still" 
                class="hero-fallback-image"
            >
        </div>
        
        <!-- Hero Video -->
        <video 
            autoplay 
            loop 
            muted 
            playsinline
            preload="metadata"
            disablePictureInPicture
            class="hero-video"
            id="hero-video"
        >
            <source src="https://file.notion.so/f/f/fa29efda-948c-4378-9da5-ea0d4058a01f/707daaf2-3013-4c03-9806-aa94085783dc/v1.0_Website_Promo_8.12.mp4?table=block&id=2348cc9f-36f1-8048-838d-ea53f873224d&spaceId=fa29efda-948c-4378-9da5-ea0d4058a01f&expirationTimestamp=1753156800000&signature=wE1KQdxOcKqfpwMjdpZU9wz04wqLa__hYjbR-CcmzKc&downloadName=v1.0+Website+Promo+%5B8.12%5D.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        
        <!-- Content Overlay for Better Readability -->
        <div class="hero-content-overlay"></div>
        
        <!-- Hero Content -->
        <div class="hero-content-wrapper">
            <div class="hero-content-dynamic">
                <h1 class="hero-main-title">BRANDON DICKS</h1>
                <div class="hero-rotating-content" id="hero-rotating">
                    <div class="hero-role active" data-role="composer">
                        <h2 class="hero-role-title">Composer</h2>
                        <p class="hero-role-description">Creating original compositions that inspire and challenge musicians</p>
                        <a href="#compositions" class="explore-btn" onclick="smoothScrollTo('#compositions'); return false;">
                            🎼 Explore Compositions
                        </a>
                    </div>
                    <div class="hero-role" data-role="trumpeter">
                        <h2 class="hero-role-title">Trumpeter</h2>
                        <p class="hero-role-description">Bringing brass music to life through performance and artistry</p>
                        <a href="#performances" class="explore-btn" onclick="smoothScrollTo('#performances'); return false;">
                            🎺 View Performances
                        </a>
                    </div>
                    <div class="hero-role" data-role="educator">
                        <h2 class="hero-role-title">Educator</h2>
                        <p class="hero-role-description">Empowering students and organizing musical experiences with innovative tools</p>
                        <a href="#education" class="explore-btn" onclick="smoothScrollTo('#education'); return false;">
                            📚 Discover Resources
                        </a>
                    </div>
                </div>
                <div class="hero-nav-dots">
                    <button class="dot active" onclick="switchHeroRole(0)"></button>
                    <button class="dot" onclick="switchHeroRole(1)"></button>
                    <button class="dot" onclick="switchHeroRole(2)"></button>
                </div>
                
                <!-- Explore Button -->
                <div class="hero-explore-section">
                    <a href="#compositions" class="explore-btn secondary" onclick="smoothScrollTo('#compositions'); return false;">
                        Click to Explore All Work
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Container -->
    <div class="main-content-container">
        <script>
        // This function is no longer needed since we have the main DOMContentLoaded handler below
        </script>

    <!-- Music Catalog Highlights Section -->
    <section id="performances" class="section-showcase" style="scroll-margin-top: 120px;">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">🎼 Music Catalog</h2>
                <p class="section-subtitle">Original compositions for professional musicians and ensembles</p>
            </div>
            <div class="catalog-highlights-grid">
                <div class="highlight-featured">
                    <div class="featured-composition" id="featured-highlight">
                        <div class="featured-composition-image">
                            <img src="/imgs/Coming Home (Cover Photo).png" alt="Featured Composition" class="composition-highlight-img">
                            <div class="audio-preview-overlay">
                                <button class="preview-play-btn" id="featured-play-btn">
                                    <span class="play-icon">▶</span>
                                    <span class="play-text">Preview</span>
                                </button>
                            </div>
                        </div>
                        <div class="featured-composition-content">
                            <div class="composition-header">
                                <h3 class="featured-title">Loading Featured Work...</h3>
                                <div class="composition-badges">
                                    <span class="difficulty-badge" id="featured-difficulty">Medium</span>
                                    <span class="year-badge" id="featured-year">2024</span>
                                </div>
                            </div>
                            <p class="featured-instrumentation">Loading...</p>
                            <p class="featured-description">Loading composition details...</p>
                            
                            <!-- Embedded Audio Player -->
                            <div class="composition-audio-preview" id="featured-audio-container" style="display: none;">
                                <audio controls preload="metadata" id="featured-audio-player">
                                    <source src="" type="audio/mpeg">
                                    Your browser does not support the audio element.
                                </audio>
                            </div>
                            
                            <div class="composition-actions">
                                <a href="#" class="btn-primary featured-link">View Full Score</a>
                                <button class="btn-secondary listen-more-btn" onclick="smoothScrollTo('#compositions'); return false;">
                                    Browse All Works
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="catalog-stats">
                    <div class="stats-header">
                        <h3>Composition Portfolio</h3>
                    </div>
                    <div class="stat-item featured-stat">
                        <span class="stat-number" id="total-compositions">25+</span>
                        <span class="stat-label">Original Compositions</span>
                        <span class="stat-detail">Across multiple genres</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">8</span>
                        <span class="stat-label">Instrumentation Types</span>
                        <span class="stat-detail">From solo to large ensemble</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">500+</span>
                        <span class="stat-label">Downloads</span>
                        <span class="stat-detail">By musicians worldwide</span>
                    </div>
                    <div class="stat-item cta-stat">
                        <a href="/music-catalog" class="btn-primary catalog-browse-btn">
                            <span class="btn-icon">🎼</span>
                            Browse Full Catalog
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Education & Notion Tools Section -->
    <section id="education" class="section-showcase alt-bg" style="scroll-margin-top: 120px;">
        <div class="container">
            <h2 class="section-title">📚 Education & Innovation</h2>
            <div class="education-grid">
                <div class="education-card">
                    <div class="card-icon">🎓</div>
                    <h3>Teaching Excellence</h3>
                    <p>Dedicated to developing the next generation of musicians through personalized instruction and innovative teaching methods.</p>
                    <a href="/teaching" class="card-link">Learn More →</a>
                </div>
                <div class="education-card">
                    <div class="card-icon">🗂️</div>
                    <h3>Notion Integration</h3>
                    <p>Streamlining music organization and student management with custom Notion databases and automation workflows.</p>
                    <a href="/notion-tools" class="card-link">Explore Tools →</a>
                </div>
                <div class="education-card">
                    <div class="card-icon">🎼</div>
                    <h3>Resource Library</h3>
                    <p>Comprehensive collection of exercises, etudes, and educational materials for brass players at all levels.</p>
                    <a href="/resources" class="card-link">Browse Library →</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials-section">
        <div class="container">
            <h2 class="section-title">What Others Say</h2>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"Brandon's compositions are both challenging and rewarding. His understanding of brass techniques is exceptional."</p>
                    </div>
                    <div class="testimonial-author">
                        <strong>Dr. Sarah Williams</strong>
                        <span>Principal Trumpet, Metro Symphony</span>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"The Notion organization system Brandon created has revolutionized how we manage our music library and student progress."</p>
                    </div>
                    <div class="testimonial-author">
                        <strong>Mark Thompson</strong>
                        <span>Director of Bands, Central High School</span>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"Brandon's teaching approach helped me develop confidence and technical skills I never thought possible."</p>
                    </div>
                    <div class="testimonial-author">
                        <strong>Emily Chen</strong>
                        <span>Music Student</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
<section id="compositions" style="scroll-margin-top: 120px;">
    <page-title>
        <h3>Featured Compositions</h3>
    </page-title>
    <main>
        <div class="container">
        </div>
        <div class="carousel-controls">
          <button class="carousel-btn left" onclick="scrollWorks(-1)">&#8592;</button>
          <button class="carousel-btn right" onclick="scrollWorks(1)">&#8594;</button>
            </div>
            <div class="carousel-outer">
                <div id="popular-works" class="works-grid">
                    <div class="loading">Loading compositions...</div>
                </div>
            </section>
        </div>
    </main>

    <!-- Call to Action Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2>Ready to Explore More?</h2>
                <p>Whether you're looking for original compositions, trumpet lessons, or innovative music organization solutions, let's connect.</p>
                <div class="cta-buttons">
                    <a href="/music-catalog" class="btn-primary">Browse Full Catalog</a>
                    <a href="/contact" class="btn-secondary">Get in Touch</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer style="text-align: center; padding: 2rem; background: var(--gray-100); margin-top: 0;">
        <p>&copy; 2025 Your Music. All rights reserved.</p>
    </footer>

    <script>
        // Example Data for Local Testing
        const exampleCompositions = [
          {
            id: "1",
            slug: "sunrise-fanfare",
            title: "Sunrise Fanfare",
            instrumentation: "Brass Quintet",
            year: 2022,
            duration: "4:30",
            difficulty: "Medium",
            description: "A bright, energetic piece for brass quintet.",
            tags: ["brass", "fanfare", "modern"],
            coverImage: "/imgs/Coming Home (Cover Photo).png",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 20
          },
          {
            id: "2",
            slug: "nocturne-in-blue",
            title: "Nocturne in Blue",
            instrumentation: "Solo Piano",
            year: 2021,
            duration: "6:00",
            difficulty: "Hard",
            description: "A reflective nocturne for solo piano.",
            tags: ["piano", "nocturne", "contemporary"],
            coverImage: "/imgs/Coming Home (Cover Photo).png",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 15
          },
          {
            id: "3",
            slug: "evening-dance",
            title: "Evening Dance",
            instrumentation: "String Quartet",
            year: 2020,
            duration: "5:15",
            difficulty: "Easy",
            description: "A gentle, lyrical piece for string quartet.",
            tags: ["strings", "quartet", "lyrical"],
            coverImage: "/imgs/Coming Home (Cover Photo).png",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 18
          },
          {
            id: "4",
            slug: "march-of-the-titans",
            title: "March of the Titans",
            instrumentation: "Wind Ensemble",
            year: 2019,
            duration: "7:00",
            difficulty: "Medium",
            description: "A bold, cinematic march for wind ensemble.",
            tags: ["wind", "ensemble", "march"],
            coverImage: "https://via.placeholder.com/350x200?text=March+of+the+Titans",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 22
          },
          {
            id: "5",
            slug: "autumn-leaves",
            title: "Autumn Leaves",
            instrumentation: "Jazz Combo",
            year: 2023,
            duration: "4:45",
            difficulty: "Easy",
            description: "A smooth jazz arrangement for combo.",
            tags: ["jazz", "combo", "autumn"],
            coverImage: "https://via.placeholder.com/350x200?text=Autumn+Leaves",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 16
          },
          {
            id: "6",
            slug: "celestial-waltz",
            title: "Celestial Waltz",
            instrumentation: "Orchestra",
            year: 2018,
            duration: "8:30",
            difficulty: "Hard",
            description: "A sweeping waltz for full orchestra.",
            tags: ["orchestra", "waltz", "celestial"],
            coverImage: "https://via.placeholder.com/350x200?text=Celestial+Waltz",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 25
          },
          {
            id: "7",
            slug: "midnight-groove",
            title: "Midnight Groove",
            instrumentation: "Saxophone Quartet",
            year: 2022,
            duration: "3:50",
            difficulty: "Medium",
            description: "A funky, rhythmic piece for sax quartet.",
            tags: ["saxophone", "quartet", "groove"],
            coverImage: "https://via.placeholder.com/350x200?text=Midnight+Groove",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 17
          },
          {
            id: "8",
            slug: "winter-solstice",
            title: "Winter Solstice",
            instrumentation: "Chamber Choir",
            year: 2021,
            duration: "6:10",
            difficulty: "Medium",
            description: "A serene choral work for winter.",
            tags: ["choir", "chamber", "winter"],
            coverImage: "https://via.placeholder.com/350x200?text=Winter+Solstice",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 19
          },
          {
            id: "9",
            slug: "rising-sun",
            title: "Rising Sun",
            instrumentation: "Solo Flute",
            year: 2020,
            duration: "2:30",
            difficulty: "Easy",
            description: "A bright solo for flute.",
            tags: ["flute", "solo", "sunrise"],
            coverImage: "https://via.placeholder.com/350x200?text=Rising+Sun",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 10
          },
          {
            id: "10",
            slug: "desert-mirage",
            title: "Desert Mirage",
            instrumentation: "Percussion Ensemble",
            year: 2017,
            duration: "5:40",
            difficulty: "Medium",
            description: "A mysterious, evocative piece for percussion.",
            tags: ["percussion", "ensemble", "desert"],
            coverImage: "https://via.placeholder.com/350x200?text=Desert+Mirage",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 21
          },
          {
            id: "11",
            slug: "spring-awakening",
            title: "Spring Awakening",
            instrumentation: "Clarinet Trio",
            year: 2023,
            duration: "4:20",
            difficulty: "Easy",
            description: "A lively trio for clarinets.",
            tags: ["clarinet", "trio", "spring"],
            coverImage: "https://via.placeholder.com/350x200?text=Spring+Awakening",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 14
          },
          {
            id: "12",
            slug: "harbor-lights",
            title: "Harbor Lights",
            instrumentation: "Brass Ensemble",
            year: 2019,
            duration: "6:50",
            difficulty: "Medium",
            description: "A shimmering brass ensemble work.",
            tags: ["brass", "ensemble", "harbor"],
            coverImage: "https://via.placeholder.com/350x200?text=Harbor+Lights",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 20
          },
          {
            id: "13",
            slug: "mountain-echoes",
            title: "Mountain Echoes",
            instrumentation: "Solo Horn",
            year: 2022,
            duration: "3:10",
            difficulty: "Medium",
            description: "A solo horn piece inspired by mountains.",
            tags: ["horn", "solo", "mountain"],
            coverImage: "https://via.placeholder.com/350x200?text=Mountain+Echoes",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 13
          },
          {
            id: "14",
            slug: "city-lights",
            title: "City Lights",
            instrumentation: "Big Band",
            year: 2021,
            duration: "5:00",
            difficulty: "Hard",
            description: "A vibrant big band chart.",
            tags: ["big band", "jazz", "city"],
            coverImage: "https://via.placeholder.com/350x200?text=City+Lights",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 23
          },
          {
            id: "15",
            slug: "forest-whispers",
            title: "Forest Whispers",
            instrumentation: "Woodwind Quintet",
            year: 2020,
            duration: "4:55",
            difficulty: "Easy",
            description: "A gentle piece for woodwind quintet.",
            tags: ["woodwind", "quintet", "forest"],
            coverImage: "https://via.placeholder.com/350x200?text=Forest+Whispers",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 15
          },
          {
            id: "16",
            slug: "river-run",
            title: "River Run",
            instrumentation: "Solo Violin",
            year: 2018,
            duration: "3:30",
            difficulty: "Medium",
            description: "A flowing solo for violin.",
            tags: ["violin", "solo", "river"],
            coverImage: "https://via.placeholder.com/350x200?text=River+Run",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 12
          },
          {
            id: "17",
            slug: "golden-fields",
            title: "Golden Fields",
            instrumentation: "String Orchestra",
            year: 2017,
            duration: "6:20",
            difficulty: "Medium",
            description: "A pastoral work for string orchestra.",
            tags: ["strings", "orchestra", "fields"],
            coverImage: "https://via.placeholder.com/350x200?text=Golden+Fields",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 19
          },
          {
            id: "18",
            slug: "firefly-nights",
            title: "Firefly Nights",
            instrumentation: "Solo Guitar",
            year: 2023,
            duration: "2:45",
            difficulty: "Easy",
            description: "A light, sparkling solo for guitar.",
            tags: ["guitar", "solo", "firefly"],
            coverImage: "https://via.placeholder.com/350x200?text=Firefly+Nights",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 11
          },
          { id: "19",
            slug: "the-stars-and-stripes-forever",
            title: "The Stars and Stripes Forever",
            instrumentation: "Solo Guitar",
            year: 2023,
            duration: "2:45",
            difficulty: "Easy",
            description: "A light, sparkling solo for guitar.",
            tags: ["guitar", "solo", "firefly"],
            coverImage: "https://via.placeholder.com/350x200?text=Firefly+Nights",
            paymentLink: "",
            stripeProductId: "",
            stripePriceId: "",
            price: 11
          }
        ];
        function enableCardClicks() {
            const cards = document.querySelectorAll('.work-card');
            cards.forEach(card => {
                card.addEventListener('click', function(e) {
                    // Only navigate if not clicking a button inside the card
                    if (e.target.tagName === 'BUTTON' || e.target.closest('button')) return;
                    const slug = this.getAttribute('data-slug');
                    if (slug) {
                        window.location.href = `/composition/${slug}`;
                    }
                });
            });
        }
        
        // Load Featured Composition for Highlights
        async function loadFeaturedComposition() {
            try {
                const response = await fetch('/api/compositions');
                const data = await response.json();
                
                if (data && data.success && data.compositions && data.compositions.length > 0) {
                    // Find the first featured composition or use the first one
                    const featured = data.compositions.find(comp => comp.popular || comp.featured) || data.compositions[0];
                    
                    // Update the featured composition display
                    const featuredTitle = document.querySelector('.featured-title');
                    const featuredInstrumentation = document.querySelector('.featured-instrumentation');
                    const featuredDescription = document.querySelector('.featured-description');
                    const featuredLink = document.querySelector('.featured-link');
                    const featuredImg = document.querySelector('.composition-highlight-img');
                    const totalCompositions = document.getElementById('total-compositions');
                    const featuredDifficulty = document.getElementById('featured-difficulty');
                    const featuredYear = document.getElementById('featured-year');
                    
                    // Update content
                    if (featuredTitle) featuredTitle.textContent = featured.title;
                    if (featuredInstrumentation) featuredInstrumentation.textContent = featured.instrumentation;
                    if (featuredDescription) {
                        featuredDescription.textContent = featured.description || 
                            `A ${featured.difficulty || 'beautiful'} composition for ${featured.instrumentation}${featured.year ? ` from ${featured.year}` : ''}.`;
                    }
                    if (featuredLink) featuredLink.href = `/composition/${featured.slug}`;
                    if (featuredImg && featured.coverImage) featuredImg.src = featured.coverImage;
                    if (totalCompositions) totalCompositions.textContent = `${data.compositions.length}+`;
                    if (featuredDifficulty) featuredDifficulty.textContent = featured.difficulty || 'Medium';
                    if (featuredYear) featuredYear.textContent = featured.year || '2024';
                    
                    // Setup audio preview if available
                    setupAudioPreview(featured);
                    
                    console.log('Featured composition loaded:', featured.title);
                }
            } catch (error) {
                console.log('Could not load featured composition, using fallback');
            }
        }

        // Setup Audio Preview Functionality
        function setupAudioPreview(composition) {
            const playBtn = document.getElementById('featured-play-btn');
            const audioContainer = document.getElementById('featured-audio-container');
            const audioPlayer = document.getElementById('featured-audio-player');
            
            if (!playBtn || !audioContainer || !audioPlayer) return;
            
            // Check if composition has audio
            const audioUrl = composition.audioLink || 
                           (composition.audioFiles && composition.audioFiles.length > 0 ? composition.audioFiles[0].url : null);
            
            if (audioUrl) {
                console.log('Audio preview available for:', composition.title);
                
                // Update audio source
                audioPlayer.src = audioUrl;
                
                // Handle preview button click
                playBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    if (audioContainer.style.display === 'none') {
                        // Show audio player
                        audioContainer.style.display = 'block';
                        audioPlayer.play();
                        
                        // Update button text
                        const playText = playBtn.querySelector('.play-text');
                        if (playText) playText.textContent = 'Now Playing';
                        
                        // Smooth scroll to audio player
                        setTimeout(() => {
                            audioContainer.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'nearest' 
                            });
                        }, 300);
                    } else {
                        // Toggle play/pause
                        if (audioPlayer.paused) {
                            audioPlayer.play();
                        } else {
                            audioPlayer.pause();
                        }
                    }
                });
                
                // Handle audio events
                audioPlayer.addEventListener('play', function() {
                    const playText = playBtn.querySelector('.play-text');
                    if (playText) playText.textContent = 'Playing';
                });
                
                audioPlayer.addEventListener('pause', function() {
                    const playText = playBtn.querySelector('.play-text');
                    if (playText) playText.textContent = 'Paused';
                });
                
                audioPlayer.addEventListener('ended', function() {
                    const playText = playBtn.querySelector('.play-text');
                    if (playText) playText.textContent = 'Preview';
                });
                
                // Show play button
                playBtn.style.display = 'flex';
            } else {
                console.log('No audio preview available for:', composition.title);
                // Hide play button if no audio
                playBtn.style.display = 'none';
            }
        }

        // Popular Compositions
        async function loadCompositions() {
            showLoading('popular-works');
            let data;
            let apiFailed = false;
            try {
                const response = await fetch('/api/compositions');
                data = await response.json();
            } catch (error) {
                apiFailed = true;
            }
            const container = document.getElementById('popular-works');
            if (!apiFailed && data && data.success && data.compositions && data.compositions.length > 0) {
                    const popularComps = data.compositions.filter(comp => comp.popular);

                    container.innerHTML = popularComps.map(comp => `
                    <div class="work-card" data-slug="${comp.slug}">
                        ${comp.coverImage ? `
                            <div class="work-image-container">
                                <img src="${comp.coverImage}" alt="${comp.title}" class="work-image" loading="lazy">
                            </div>
                        ` : ''}
                        <div class="work-header">
                            <h3 class="work-title">${comp.title}</h3>
                            <div class="work-instrument">${comp.instrumentation}</div>
                        </div>
                        <div class="work-content">
                            <div class="work-links">
                                <button class="btn-disabled" onclick="event.stopPropagation(); showUnavailableMessage('${comp.title.replace(/'/g, "\\'")}')">
                                    🚫 Currently Not Available
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                enableCardClicks();
            } else {
                // Use example data for local testing
                container.innerHTML = exampleCompositions.map(comp => `
                    <div class="work-card" data-slug="${comp.slug}">
                        ${comp.coverImage ? `
                            <div class="work-image-container">
                                <img src="${comp.coverImage}" alt="${comp.title}" class="work-image" loading="lazy">
                            </div>
                        ` : ''}
                        <div class="work-header">
                            <h3 class="work-title">${comp.title}</h3>
                            <div class="work-instrument">${comp.instrumentation}</div>
                        </div>
                        <div class="work-content">
                                <button class="btn-disabled" onclick="event.stopPropagation(); showUnavailableMessage('${comp.title.replace(/'/g, "\\'")}')">
                                    🚫 Currently Not Available
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                enableCardClicks();
            }
        }

        // Purchase with Stripe integration
        async function purchaseWithStripe(compositionId, title, price) {
            try {
                const confirmed = confirm(`Purchase "${title}" for ${price}?\n\nYou'll be redirected to Stripe checkout.`);
                
                if (confirmed) {
                    const response = await fetch('/api/create-checkout-session', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ compositionId: compositionId })
                    });
                    
                    const data = await response.json();
                    
                    if (data.checkoutUrl) {
                        window.location.href = data.checkoutUrl;
                    } else {
                        alert('Error creating checkout session. Please try again.');
                    }
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error processing purchase. Please try again.');
            }
        }

        // Show unavailable message
        function showUnavailableMessage(title) {
            alert(`"${title}" is currently not available for purchase.\n\nPlease contact us directly for more information about acquiring this composition.`);
        }

        // Purchase function for Stripe integration
        function purchaseComposition(paymentLink, title) {
            try {
                if (paymentLink && (paymentLink.includes('stripe.com') || paymentLink.includes('buy.stripe.com'))) {
                    const confirmed = confirm(`Purchase "${title}"?\n\nYou'll be redirected to Stripe to complete your payment.`);
                    
                    if (confirmed) {
                        window.open(paymentLink, '_blank');
                        console.log(`Redirected to payment for: ${title}`);
                    }
                } else {
                    alert('Invalid payment link. Please contact support.');
                }
            } catch (error) {
                console.error('Error processing purchase:', error);
                alert('Sorry, there was an issue. Please try again.');
            }
        }

        // View composition details
        async function viewComposition(slug) {
            try {
                const response = await fetch(`/api/compositions/slug/${slug}`);
                const data = await response.json();
                
                if (data.success) {
                    showCompositionModal(data.composition);
                } else {
                    alert('Failed to load composition details');
                }
            } catch (error) {
                console.error('Error loading composition:', error);
                alert('Error loading composition details');
            }
        }

        // Show composition modal
        function showCompositionModal(comp) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="closeModal()">&times;</button>
                    <h2>${comp.title}</h2>
                    <p><strong>Instrumentation:</strong> ${comp.instrumentation}</p>
                    ${comp.year ? `<p><strong>Year:</strong> ${comp.year}</p>` : ''}
                    <p><strong>Description:</strong> ${comp.description}</p>
                    
                    <div class="modal-links">
                        ${comp.audioLink ? `<a href="${comp.audioLink}" target="_blank" class="btn-secondary">🎵 Listen</a>` : ''}
                        ${comp.scoreLink ? `<a href="${comp.scoreLink}" target="_blank" class="btn-secondary">📄 View Score</a>` : ''}
                        
                        ${comp.paymentLink ? `
                            <button class="btn-primary payment-btn" onclick="purchaseComposition('${comp.paymentLink}', '${comp.title.replace(/'/g, "\\'")}')">
                                💳 Buy Now
                            </button>
                        ` : comp.purchaseLink ? `
                            <a href="${comp.purchaseLink}" target="_blank" class="btn-primary">💳 Purchase</a>
                        ` : `
                            <button class="btn-disabled" onclick="showUnavailableMessage('${comp.title.replace(/'/g, "\\'")}')">
                                🚫 Currently Not Available
                            </button>
                        `}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Close modal
        function closeModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                modal.remove();
            }
        }

        // Utility functions
        function showLoading(containerId) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = '<div class="loading">Loading compositions...</div>';
            }
        }

        function showError(containerId, message) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = `<div class="error">${message}</div>`;
            }
        }

        function scrollWorks(direction) {
            const grid = document.getElementById('popular-works');
            if (!grid) return;
            // Find the width of a card or use a default
            const card = grid.querySelector('.work-card');
            const scrollAmount = card ? card.offsetWidth + 24 : 320; // 24px gap or fallback
            grid.scrollBy({
                left: direction * scrollAmount,
                behavior: 'smooth'
            });
        }

        // Enhanced Video Loading and Fallback Logic with Retry Mechanism
        let heroCarouselInitialized = false;
        let videoRetryCount = 0;
        const maxVideoRetries = 3;
        let videoRetryTimeout;
        
        function initHeroVideo() {
            const video = document.getElementById('hero-video');
            const carousel = document.getElementById('hero-carousel');
            const fallbackImages = document.querySelectorAll('.hero-fallback-image');
            
            if (!video || !carousel) {
                console.log('Hero video or carousel not found');
                initHeroCarousel(); // Fallback to carousel
                return;
            }
            
            console.log(`Initializing hero video... (attempt ${videoRetryCount + 1}/${maxVideoRetries})`);
            
            // Start with carousel active as fallback
            if (!heroCarouselInitialized) {
                initHeroCarousel();
            }
            
            // Force video load attempt
            video.load();
            
            // Set a timeout to retry video loading or use carousel fallback
            const videoTimeout = setTimeout(() => {
                console.log('Video loading timeout - checking retry options');
                video.style.display = 'none';
                video.classList.remove('loaded');
                
                if (videoRetryCount < maxVideoRetries - 1) {
                    // Retry video loading
                    videoRetryCount++;
                    console.log(`⏳ Retrying video load in 2 seconds... (attempt ${videoRetryCount + 1}/${maxVideoRetries})`);
                    
                    videoRetryTimeout = setTimeout(() => {
                        video.style.display = 'block';
                        initHeroVideo(); // Recursive retry
                    }, 2000); // Wait 2 seconds before retry
                } else {
                    // Max retries reached - use carousel permanently
                    console.log('❌ Max video retries reached - using carousel fallback');
                    
                    // Ensure all fallback images are visible
                    fallbackImages.forEach(img => {
                        img.classList.remove('hidden');
                    });
                    
                    // Make sure carousel is running
                    if (!heroCarouselInitialized) {
                        initHeroCarousel();
                    }
                }
            }, 4000); // Give more time for each attempt
            
            // Video loading events
            video.addEventListener('loadeddata', function() {
                console.log('✅ Video loaded successfully');
                clearTimeout(videoTimeout);
                clearTimeout(videoRetryTimeout);
                videoRetryCount = 0; // Reset retry count on success
                
                // Try to play the video
                video.play().then(() => {
                    console.log('✅ Video playing - hiding carousel');
                    // Only hide fallback images if video actually starts playing
                    fallbackImages.forEach(img => {
                        img.classList.add('hidden');
                    });
                    
                    // Show and animate the video
                    setTimeout(() => {
                        video.classList.add('loaded');
                    }, 300);
                }).catch(e => {
                    console.log('⚠️ Video autoplay blocked:', e);
                    // Keep carousel active if video can't play
                    fallbackImages.forEach(img => {
                        img.classList.remove('hidden');
                    });
                });
            });
            
            video.addEventListener('error', function(e) {
                console.log('❌ Video failed to load:', e);
                clearTimeout(videoTimeout);
                clearTimeout(videoRetryTimeout);
                video.style.display = 'none';
                
                // Try again if we haven't reached max retries
                if (videoRetryCount < maxVideoRetries - 1) {
                    videoRetryCount++;
                    console.log(`⏳ Video error - retrying in 3 seconds... (attempt ${videoRetryCount + 1}/${maxVideoRetries})`);
                    
                    videoRetryTimeout = setTimeout(() => {
                        video.style.display = 'block';
                        initHeroVideo(); // Recursive retry
                    }, 3000);
                } else {
                    console.log('❌ Max video retries reached after error - using carousel fallback');
                    
                    // Ensure carousel is visible and active
                    fallbackImages.forEach(img => {
                        img.classList.remove('hidden');
                    });
                    
                    if (!heroCarouselInitialized) {
                        initHeroCarousel();
                    }
                }
            });
            
            // Handle visibility change (tab switching)
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden && video.style.display !== 'none' && video.paused) {
                    video.play().catch(e => console.log('Video play failed on visibility change:', e));
                }
            });
        }

        // Enhanced smooth scroll function that waits for content
        async function smoothScrollTo(targetId) {
            const target = document.querySelector(targetId);
            if (!target) {
                console.log('Target not found:', targetId);
                return;
            }
            
            // Pause hero rotation when user navigates
            if (heroRotationInterval) {
                clearInterval(heroRotationInterval);
            }
            
            // Wait a bit for any dynamic content to load
            await new Promise(resolve => setTimeout(resolve, 100));
            
            // Check if the carousel has loaded content for compositions section
            if (targetId === '#compositions') {
                const carousel = document.getElementById('popular-works');
                if (carousel && carousel.innerHTML.includes('Loading compositions...')) {
                    // Wait for compositions to load
                    await new Promise(resolve => {
                        const checkLoading = () => {
                            if (!carousel.innerHTML.includes('Loading compositions...')) {
                                resolve();
                            } else {
                                setTimeout(checkLoading, 100);
                            }
                        };
                        checkLoading();
                    });
                }
            }
            
            // Now scroll to the target
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
            
            // Resume hero rotation after scroll
            setTimeout(() => {
                if (!heroRotationInterval) {
                    startHeroRotation();
                }
            }, 1000);
        }

        // Hero Image Carousel
        let carouselInterval;
        
        function initHeroCarousel() {
            // Prevent multiple initializations
            if (heroCarouselInitialized) {
                console.log('Hero carousel already initialized');
                return;
            }
            
            const images = document.querySelectorAll('.hero-fallback-image');
            const video = document.getElementById('hero-video');
            let currentIndex = 0;
            
            console.log('Initializing hero carousel with', images.length, 'images');
            
            if (images.length <= 1) {
                heroCarouselInitialized = true;
                return; // No carousel needed for single image
            }
            
            // Ensure first image is active and all others are hidden
            images.forEach((img, index) => {
                if (index === 0) {
                    img.classList.add('active');
                    img.classList.remove('hidden');
                    img.style.zIndex = '2';
                } else {
                    img.classList.remove('active');
                    img.classList.add('hidden');
                    img.style.zIndex = '1';
                }
            });
            
            function showNextImage() {
                console.log(`Carousel transition: from image ${currentIndex + 1} to next`);
                
                // Hide ALL images first to ensure clean state
                images.forEach((img, index) => {
                    img.classList.remove('active');
                    img.classList.add('hidden');
                    img.style.zIndex = '1';
                });
                
                // Move to next image
                const previousIndex = currentIndex;
                currentIndex = (currentIndex + 1) % images.length;
                
                // Show only the current image
                const currentImg = images[currentIndex];
                currentImg.classList.add('active');
                currentImg.classList.remove('hidden');
                currentImg.style.zIndex = '2';
                
                console.log(`Carousel showing image ${currentIndex + 1} of ${images.length} (was ${previousIndex + 1})`);
                
                // Double-check that the previous image is definitely hidden
                if (previousIndex !== currentIndex) {
                    const prevImg = images[previousIndex];
                    prevImg.classList.remove('active');
                    prevImg.classList.add('hidden');
                    prevImg.style.zIndex = '1';
                }
            }
            
            function startCarousel() {
                // Clear any existing interval
                if (carouselInterval) {
                    clearInterval(carouselInterval);
                }
                // Start carousel with 4-second intervals
                carouselInterval = setInterval(showNextImage, 4000);
                console.log('Carousel started');
            }
            
            function stopCarousel() {
                if (carouselInterval) {
                    clearInterval(carouselInterval);
                    carouselInterval = null;
                    console.log('Carousel stopped');
                }
            }
            
            // Start carousel immediately
            startCarousel();
            
            // Mark as initialized
            heroCarouselInitialized = true;
            
            // Stop carousel when video actually starts playing (not just loading)
            if (video) {
                video.addEventListener('play', function() {
                    console.log('Video started playing - stopping carousel');
                    stopCarousel();
                });
                
                video.addEventListener('pause', function() {
                    console.log('Video paused - restarting carousel');
                    startCarousel();
                });
                
                video.addEventListener('ended', function() {
                    console.log('Video ended - restarting carousel');
                    startCarousel();
                });
            }
        }

        // Hero Role Rotation
        let currentHeroRole = 0;
        let heroRotationInterval;

        function initHeroRotation() {
            startHeroRotation();
        }

        function startHeroRotation() {
            heroRotationInterval = setInterval(() => {
                switchHeroRole((currentHeroRole + 1) % 3);
            }, 5000); // Switch every 5 seconds
        }

        function switchHeroRole(index) {
            const roles = document.querySelectorAll('.hero-role');
            const dots = document.querySelectorAll('.dot');
            
            // Remove active class from current role and dot
            roles[currentHeroRole].classList.remove('active');
            dots[currentHeroRole].classList.remove('active');
            
            // Update current index
            currentHeroRole = index;
            
            // Add active class to new role and dot
            roles[currentHeroRole].classList.add('active');
            dots[currentHeroRole].classList.add('active');
            
            // Restart the rotation timer
            clearInterval(heroRotationInterval);
            startHeroRotation();
        }

        // Load everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadCompositions();
            loadFeaturedComposition();
            initHeroVideo(); // This will handle fallback to carousel internally
            initHeroRotation();
            // Mobile menu and theme toggle are now handled by main.js
        });
        
        // Clean up any existing timeouts on page unload
        window.addEventListener('beforeunload', function() {
            if (videoRetryTimeout) {
                clearTimeout(videoRetryTimeout);
            }
        });
    </script>
    
    <!-- Load external script for additional functionality -->
    <script src="composition.js"></script>
    <script src="main.js"></script>
    
    </div> <!-- Close main-content-container -->
</body>
</html>